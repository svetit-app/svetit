<h1 *ngIf="currentSpace">{{currentSpace.name}}</h1>

<hr *ngIf="invitationList.total > 0" class="width-and-clear">
<app-space-invitation-list
	#invitationList
	[currentSpace]="currentSpace"
	[pageSize]="pageSize.invitations"
	(onPageSize)="savePageSize('invitations', $event)"
></app-space-invitation-list>

<hr class="width-and-clear">
<div class="space-links-heading">
	<h2 i18n="@@SPACES.DETAIL.LINKS.HEADING">Ссылки-приглашения</h2>
	<button mat-icon-button (click)="onLinkAdd()"><mat-icon>add</mat-icon></button>
</div>
<div class="width-and-clear">
	<!-- form for creating link -->
	<div class="row" *ngIf="!isLinkFormHidden">
		<form [formGroup]="linkForm" (ngSubmit)="onSubmitLink()">
			<div class="left-float left-padding">
				<mat-form-field appearance="fill">
					<input matInput type="text" formControlName="name" required />
					<mat-hint i18n="@@SPACES.DETAIL.LINKS.ADDFORM.LINKNAME">Имя ссылки</mat-hint>
				</mat-form-field>
			</div>
			<div class="left-float left-padding">
				<mat-form-field appearance="fill">
					<input matInput type="date" formControlName="expiredAt" required />
					<mat-hint i18n="@@SPACES.DETAIL.LINKS.ADDFORM.EXPIREDATE">Срок действия</mat-hint>
				</mat-form-field>
			</div>
			<div class="left-float left-padding"><button mat-icon-button type="submit"><mat-icon>done</mat-icon></button></div>
			<div class="left-float left-padding"><button mat-icon-button (click)="onLinkFormCloseBtn()"><mat-icon>close</mat-icon></button></div>
		</form>
	</div> <!-- end form for creating link -->

	<!-- listing links -->
	<div *ngFor="let link of links" class="row">
		<div class="left-float">{{link.name}}</div>
		<div class="left-float left-padding">{{link.expiredAt | date}}</div>
		<div class="left-float left-padding"><button mat-raised-button i18n="@@SPACES.DETAIL.LINKS.COPYBTN" (click)="onLinkCopyBtn(link)">Копировать</button></div>
		<div class="left-float left-padding"><button mat-icon-button (click)="onLinkDelBtn(link)"><mat-icon>close</mat-icon></button></div>
	</div>
</div>
<mat-paginator #linksPaginator class="width-and-clear" [length]="linksTotal" [pageSize]="pageSize.links" [pageSizeOptions]="[7, 15, 30, 100]" (page)="getLinks($event.pageSize, $event.pageIndex)"></mat-paginator>
<!-- end of listing links -->

<!-- listing users -->
<hr class="width-and-clear">
<h2 i18n="@@SPACES.DETAIL.USERS.HEADING">Пользователи</h2>
<div class="width-and-clear">
	<div *ngFor="let user of users" class="row">
		<div class="left-float" [matTooltip]="user.userLogin + ' ' + user.userEmail" [matTooltipPosition]="'below'">
			{{user.userDisplayName}}</div>
		<div class="left-float left-padding">
			<mat-form-field>
				<mat-select [(ngModel)]="user.role">
					<mat-option value="admin" i18n="@@SPACES.DETAIL.ADMINROLE">Администратор</mat-option>
					<mat-option value="user" i18n="@@SPACES.DETAIL.USERROLE">Пользователь</mat-option>
					<mat-option value="guest" i18n="@@SPACES.DETAIL.GUESTROLE">Гость</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
		<div class="left-float left-padding"><button mat-icon-button (click)="onUserDelBtn(user)"><mat-icon>close</mat-icon></button></div>
	</div>
</div>
<mat-paginator #usersPaginator class="width-and-clear" [length]="usersTotal" [pageSize]="pageSize.users" [pageSizeOptions]="[7, 15, 30, 100]" (page)="getUsers($event.pageSize, $event.pageIndex)"></mat-paginator>
<!-- end of listing users -->
