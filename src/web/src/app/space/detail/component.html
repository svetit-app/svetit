<h1>{{currentSpace.name}}</h1>

<!-- listing invites -->
<hr class="width-and-clear">
<div class="space-invites-heading">
	<h2 i18n="@@SPACES.DETAIL.INVITES.HEADING">Приглашения</h2>
	<button mat-icon-button (click)="onInviteAdd()"><mat-icon>add</mat-icon></button>
</div>
<div class="width-and-clear">
	<!-- form for inviting user -->
	<div class="row">
		<form [formGroup]="inviteForm" [hidden]="isInviteFormHidden" (ngSubmit)="onSubmitInvite(inviteForm)">
			<div class="left-float left-padding">
				<mat-form-field appearance="fill">
					<input matInput type="text" formControlName="username" required />
					<mat-hint i18n="">Логин пользователя</mat-hint>
				</mat-form-field>
			</div>
			<div class="left-float left-padding">
				<mat-form-field>
					<select matNativeControl formControlName="role">
						<option value="admin" i18n="">Администратор</option>
						<option value="user" i18n="">Пользователь</option>
						<option value="guest" i18n="" selected>Гость</option>
					</select>
					<mat-hint i18n="">Роль</mat-hint>
				</mat-form-field>
			</div>
			<div class="left-float left-padding"><button mat-icon-button type="submit" i18n=""><mat-icon>done</mat-icon></button></div>
			<div class="left-float left-padding"><button mat-icon-button (click)="onInviteFormCloseBtn()"><mat-icon>close</mat-icon></button></div>
		</form>
	</div> <!-- end form for inviting user -->

	<div *ngFor="let invite of invites" class="row">
		<div class="left-float">{{getUsernameById(invite.userId)}}</div>
		<div class="left-float left-padding">
			<mat-form-field>
				<select matNativeControl [(ngModel)]="invite.role">
					<option value="admin" i18n="@@SPACES.DETAIL.ADMINROLE">Администратор</option>
					<option value="user" i18n="@@SPACES.DETAIL.USERROLE">Пользователь</option>
					<option value="guest" i18n="@@SPACES.DETAIL.GUESTROLE">Гость</option>
				</select>
			</mat-form-field>
		</div>
		<div *ngIf="invite.creatorId == invite.userId && invite.userId != currentUserId" class="left-float left-padding"><button mat-raised-button i18n="@@SPACES.DETAIL.INVITES.APPROVEBTN">Одобрить</button></div>
		<div class="left-float left-padding"><button mat-icon-button (click)="onInviteDelBtn(invite)"><mat-icon>close</mat-icon></button></div>
	</div>
</div>
<mat-paginator #invitesPaginator class="width-and-clear" [length]="invitesTotal" [pageSize]="invitesPageSize" [pageSizeOptions]="[7, 15, 30, 100]" (page)="getInvites($event.pageSize, $event.pageIndex); savePageSizeToLocalStorage('invitesPaginatorSpaceDetail', $event);"></mat-paginator>
<!-- end of listing invites -->

<hr class="width-and-clear">
<div class="space-links-heading">
	<h2 i18n="@@SPACES.DETAIL.REFS.HEADING">Ссылки-приглашения</h2>
	<button mat-icon-button (click)="onLinkAdd()"><mat-icon>add</mat-icon></button>
</div>
<div class="width-and-clear">
	<!-- form for creating link -->
	<div class="row">
		<form [formGroup]="linkForm" [hidden]="isLinkFormHidden" (ngSubmit)="onSubmitLink(linkForm)">
			<div class="left-float left-padding">
				<mat-form-field appearance="fill">
					<input matInput type="text" formControlName="name" required />
					<mat-hint i18n="">Имя ссылки</mat-hint>
				</mat-form-field>
			</div>
			<div class="left-float left-padding">
				<mat-form-field appearance="fill">
					<input matInput type="date" formControlName="expiredAt" required />
					<mat-hint i18n="">Срок действия</mat-hint>
				</mat-form-field>
			</div>
			<div class="left-float left-padding"><button mat-icon-button type="submit" i18n=""><mat-icon>done</mat-icon></button></div>
			<div class="left-float left-padding"><button mat-icon-button (click)="onLinkFormCloseBtn()"><mat-icon>close</mat-icon></button></div>
		</form>
	</div> <!-- end form for creating link -->
	
	<!-- listing links -->
	<div *ngFor="let link of links" class="row">
		<div class="left-float">{{link.name}}</div>
		<div class="left-float left-padding">{{link.expiredAt | date}}</div>
		<div class="left-float left-padding"><button mat-raised-button i18n="@@SPACES.DETAIL.REFS.COPYBTN" (click)="onLinkCopyBtn(link)">Копировать</button></div>
		<div class="left-float left-padding"><button mat-icon-button (click)="onLinkDelBtn(link)"><mat-icon>close</mat-icon></button></div>
	</div>
</div>
<mat-paginator #linksPaginator class="width-and-clear" [length]="linksTotal" [pageSize]="linksPageSize" [pageSizeOptions]="[7, 15, 30, 100]" (page)="getLinks($event.pageSize, $event.pageIndex); savePageSizeToLocalStorage('linksPaginatorSpaceDetail', $event);"></mat-paginator> 
<!-- end of listing links -->

<!-- listing users -->
<hr class="width-and-clear">
<h2 i18n="@@SPACES.DETAIL.USERS.HEADING">Пользователи</h2>
<div class="width-and-clear">
	<div *ngFor="let user of users" class="row">
		<div class="left-float">{{getUserNameById(user.userId)}}</div>
		<div class="left-float left-padding">{{getUsernameById(user.userId)}}</div>
		<div class="left-float left-padding">
			<mat-form-field>
				<select matNativeControl [(ngModel)]="user.role">
					<option value="admin" i18n="@@SPACES.DETAIL.ADMINROLE">Администратор</option>
					<option value="user" i18n="@@SPACES.DETAIL.USERROLE">Пользователь</option>
					<option value="guest" i18n="@@SPACES.DETAIL.GUESTROLE">Гость</option>
				</select>
			</mat-form-field>
		</div>
		<div class="left-float left-padding">{{getUserEmailById(user.userId)}}</div>
		<div class="left-float left-padding"><button mat-icon-button (click)="onUserDelBtn(user)"><mat-icon>close</mat-icon></button></div>
	</div>
</div>
<mat-paginator #usersPaginator class="width-and-clear" [length]="usersTotal" [pageSize]="usersPageSize" [pageSizeOptions]="[7, 15, 30, 100]" (page)="getUsers($event.pageSize, $event.pageIndex); savePageSizeToLocalStorage('usersPaginatorSpaceDetail', $event);"></mat-paginator>
<!-- end of listing users -->
