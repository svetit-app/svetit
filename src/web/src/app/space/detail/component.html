<h1 *ngIf="currentSpace">{{currentSpace.name}}</h1>

<!-- listing invitations -->
<hr class="width-and-clear">
<div class="space-invitations-heading">
	<h2 i18n="@@SPACES.DETAIL.INVITATIONS.HEADING">Приглашения</h2>
	<button mat-icon-button (click)="onInvitationAdd()"><mat-icon>add</mat-icon></button>
</div>
<div class="width-and-clear">
	<!-- form for inviting user -->
	<div class="row" *ngIf="!isInvitationFormHidden">
		<form [formGroup]="invitationForm" (ngSubmit)="onSubmitInvitation()">
			<div class="left-float left-padding">
				<mat-form-field appearance="fill">
					<input matInput type="text" formControlName="login" required />
					<mat-hint i18n="@@SPACES.DETAIL.INVITATIONS.ADDFORM.LOGIN">Логин пользователя</mat-hint>
				</mat-form-field>
			</div>
			<div class="left-float left-padding">
				<mat-form-field>
					<mat-select formControlName="role">
						<mat-option value="admin" i18n="@@SPACES.DETAIL.INVITATIONS.ADDFORM.ROLES.ADMIN">Администратор</mat-option>
						<mat-option value="user" i18n="@@SPACES.DETAIL.INVITATIONS.ADDFORM.ROLES.USER">Пользователь</mat-option>
						<mat-option value="guest" i18n="@@SPACES.DETAIL.INVITATIONS.ADDFORM.ROLES.GUEST" selected>Гость</mat-option>
					</mat-select>
					<mat-hint i18n="@@SPACES.DETAIL.INVITATIONS.ADDFORM.ROLE">Роль</mat-hint>
				</mat-form-field>
			</div>
			<div class="left-float left-padding"><button mat-icon-button type="submit"><mat-icon>done</mat-icon></button></div>
			<div class="left-float left-padding"><button mat-icon-button (click)="onInvitationFormCloseBtn()"><mat-icon>close</mat-icon></button></div>
		</form>
	</div> <!-- end form for inviting user -->

	<div *ngFor="let invitation of invitations" class="row">
		<div class="left-float"
			[matTooltip]="invitation.login + ' ' + invitation.email"
			matTooltipPosition="below">
			{{invitation.displayName}}
		</div>
		<div class="left-float left-padding">
			<mat-form-field>
				<mat-select [(ngModel)]="invitation.role">
					<mat-option value="admin" i18n="@@SPACES.DETAIL.ADMINROLE">Администратор</mat-option>
					<mat-option value="user" i18n="@@SPACES.DETAIL.USERROLE">Пользователь</mat-option>
					<mat-option value="guest" i18n="@@SPACES.DETAIL.GUESTROLE">Гость</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
		<div *ngIf="invitation.creatorId == invitation.userId && invitation.userId != currentUserId" class="left-float left-padding"><button mat-raised-button i18n="@@SPACES.DETAIL.INVITATIONS.APPROVEBTN">Одобрить</button></div>
		<div class="left-float left-padding"><button mat-icon-button (click)="onInvitationDelBtn(invitation)"><mat-icon>close</mat-icon></button></div>
	</div>
</div>
<mat-paginator #invitationsPaginator class="width-and-clear" [length]="invitationsTotal" [pageSize]="pageSize.invitations" [pageSizeOptions]="[7, 15, 30, 100]" (page)="getInvitations($event.pageSize, $event.pageIndex)"></mat-paginator>
<!-- end of listing invitations -->

<hr class="width-and-clear">
<div class="space-links-heading">
	<h2 i18n="@@SPACES.DETAIL.LINKS.HEADING">Ссылки-приглашения</h2>
	<button mat-icon-button (click)="onLinkAdd()"><mat-icon>add</mat-icon></button>
</div>
<div class="width-and-clear">
	<!-- form for creating link -->
	<div class="row" *ngIf="!isLinkFormHidden">
		<form [formGroup]="linkForm" (ngSubmit)="onSubmitLink()">
			<div class="left-float left-padding">
				<mat-form-field appearance="fill">
					<input matInput type="text" formControlName="name" required />
					<mat-hint i18n="@@SPACES.DETAIL.LINKS.ADDFORM.LINKNAME">Имя ссылки</mat-hint>
				</mat-form-field>
			</div>
			<div class="left-float left-padding">
				<mat-form-field appearance="fill">
					<input matInput type="date" formControlName="expiredAt" required />
					<mat-hint i18n="@@SPACES.DETAIL.LINKS.ADDFORM.EXPIREDATE">Срок действия</mat-hint>
				</mat-form-field>
			</div>
			<div class="left-float left-padding"><button mat-icon-button type="submit"><mat-icon>done</mat-icon></button></div>
			<div class="left-float left-padding"><button mat-icon-button (click)="onLinkFormCloseBtn()"><mat-icon>close</mat-icon></button></div>
		</form>
	</div> <!-- end form for creating link -->
	
	<!-- listing links -->
	<div *ngFor="let link of links" class="row">
		<div class="left-float">{{link.name}}</div>
		<div class="left-float left-padding">{{link.expiredAt | date}}</div>
		<div class="left-float left-padding"><button mat-raised-button i18n="@@SPACES.DETAIL.LINKS.COPYBTN" (click)="onLinkCopyBtn(link)">Копировать</button></div>
		<div class="left-float left-padding"><button mat-icon-button (click)="onLinkDelBtn(link)"><mat-icon>close</mat-icon></button></div>
	</div>
</div>
<mat-paginator #linksPaginator class="width-and-clear" [length]="linksTotal" [pageSize]="pageSize.links" [pageSizeOptions]="[7, 15, 30, 100]" (page)="getLinks($event.pageSize, $event.pageIndex)"></mat-paginator> 
<!-- end of listing links -->

<!-- listing users -->
<hr class="width-and-clear">
<h2 i18n="@@SPACES.DETAIL.USERS.HEADING">Пользователи</h2>
<div class="width-and-clear">
	<div *ngFor="let user of users" class="row">
		<div class="left-float" [matTooltip]="user.login + ' ' + user.email" [matTooltipPosition]="'below'">
			{{user.displayName}}</div>
		<div class="left-float left-padding">
			<mat-form-field>
				<mat-select [(ngModel)]="user.role">
					<mat-option value="admin" i18n="@@SPACES.DETAIL.ADMINROLE">Администратор</mat-option>
					<mat-option value="user" i18n="@@SPACES.DETAIL.USERROLE">Пользователь</mat-option>
					<mat-option value="guest" i18n="@@SPACES.DETAIL.GUESTROLE">Гость</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
		<div class="left-float left-padding"><button mat-icon-button (click)="onUserDelBtn(user)"><mat-icon>close</mat-icon></button></div>
	</div>
</div>
<mat-paginator #usersPaginator class="width-and-clear" [length]="usersTotal" [pageSize]="pageSize.users" [pageSizeOptions]="[7, 15, 30, 100]" (page)="getUsers($event.pageSize, $event.pageIndex)"></mat-paginator>
<!-- end of listing users -->
